/*!
 * w-sync-webdata-client v1.0.21
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-sync-webdata-client"]=e()}(this,(function(){"use strict";function t(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}var e,r=function(t,r,n){for(var o=-1,u=Object(t),a=n(t),i=a.length;i--;){var c=a[e?i:++o];if(!1===r(u[c],c,u))break}return t};var n="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,u=n||o||Function("return this")(),a=u.Symbol,i=Object.prototype,c=i.hasOwnProperty,f=i.toString,s=a?a.toStringTag:void 0;var l=Object.prototype.toString;var p="[object Null]",v="[object Undefined]",b=a?a.toStringTag:void 0;function y(t){return null==t?void 0===t?v:p:b&&b in Object(t)?function(t){var e=c.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=f.call(t);return n&&(e?t[s]=r:delete t[s]),o}(t):function(t){return l.call(t)}(t)}function h(t){return null!=t&&"object"==typeof t}function d(t){return h(t)&&"[object Arguments]"==y(t)}var j=Object.prototype,g=j.hasOwnProperty,_=j.propertyIsEnumerable,w=d(function(){return arguments}())?d:function(t){return h(t)&&g.call(t,"callee")&&!_.call(t,"callee")},m=w,O=Array.isArray;var T="object"==typeof exports&&exports&&!exports.nodeType&&exports,A=T&&"object"==typeof module&&module&&!module.nodeType&&module,x=A&&A.exports===T?u.Buffer:void 0,S=(x?x.isBuffer:void 0)||function(){return!1},P=9007199254740991,z=/^(?:0|[1-9]\d*)$/;function I(t,e){var r=typeof t;return!!(e=null==e?P:e)&&("number"==r||"symbol"!=r&&z.test(t))&&t>-1&&t%1==0&&t<e}var E=9007199254740991;function U(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=E}var F={};function M(t){return function(e){return t(e)}}F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1;var N="object"==typeof exports&&exports&&!exports.nodeType&&exports,k=N&&"object"==typeof module&&module&&!module.nodeType&&module,B=k&&k.exports===N&&n.process,C=function(){try{var t=k&&k.require&&k.require("util").types;return t||B&&B.binding&&B.binding("util")}catch(t){}}(),L=C&&C.isTypedArray,$=L?M(L):function(t){return h(t)&&U(t.length)&&!!F[y(t)]},D=Object.prototype.hasOwnProperty;function R(t,e){var r=O(t),n=!r&&m(t),o=!r&&!n&&S(t),u=!r&&!n&&!o&&$(t),a=r||n||o||u,i=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=i.length;for(var f in t)!e&&!D.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||I(f,c))||i.push(f);return i}var V=Object.prototype;function W(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||V)}function q(t,e){return function(r){return t(e(r))}}var G=q(Object.keys,Object),H=Object.prototype.hasOwnProperty;function J(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var K="[object AsyncFunction]",Q="[object Function]",X="[object GeneratorFunction]",Y="[object Proxy]";function Z(t){if(!J(t))return!1;var e=y(t);return e==Q||e==X||e==K||e==Y}function tt(t){return null!=t&&U(t.length)&&!Z(t)}function et(t){return tt(t)?R(t):function(t){if(!W(t))return G(t);var e=[];for(var r in Object(t))H.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var rt=function(t,e){return function(r,n){if(null==r)return r;if(!tt(r))return t(r,n);for(var o=r.length,u=e?o:-1,a=Object(r);(e?u--:++u<o)&&!1!==n(a[u],u,a););return r}}((function(t,e){return t&&r(t,e,et)})),nt=rt;function ot(t){return t}function ut(e,r){var n;return(O(e)?t:nt)(e,"function"==typeof(n=r)?n:ot)}function at(t,e){return t===e||t!=t&&e!=e}function it(t,e){for(var r=t.length;r--;)if(at(t[r][0],e))return r;return-1}var ct=Array.prototype.splice;function ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ft.prototype.clear=function(){this.__data__=[],this.size=0},ft.prototype.delete=function(t){var e=this.__data__,r=it(e,t);return!(r<0)&&(r==e.length-1?e.pop():ct.call(e,r,1),--this.size,!0)},ft.prototype.get=function(t){var e=this.__data__,r=it(e,t);return r<0?void 0:e[r][1]},ft.prototype.has=function(t){return it(this.__data__,t)>-1},ft.prototype.set=function(t,e){var r=this.__data__,n=it(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var st,lt=u["__core-js_shared__"],pt=(st=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||""))?"Symbol(src)_1."+st:"";var vt=Function.prototype.toString;function bt(t){if(null!=t){try{return vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var yt=/^\[object .+?Constructor\]$/,ht=Function.prototype,dt=Object.prototype,jt=ht.toString,gt=dt.hasOwnProperty,_t=RegExp("^"+jt.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wt(t){return!(!J(t)||(e=t,pt&&pt in e))&&(Z(t)?_t:yt).test(bt(t));var e}function mt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return wt(r)?r:void 0}var Ot=mt(u,"Map"),Tt=mt(Object,"create");var At=Object.prototype.hasOwnProperty;var xt=Object.prototype.hasOwnProperty;function St(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function zt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}St.prototype.clear=function(){this.__data__=Tt?Tt(null):{},this.size=0},St.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},St.prototype.get=function(t){var e=this.__data__;if(Tt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return At.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return Tt?void 0!==e[t]:xt.call(e,t)},St.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Tt&&void 0===e?"__lodash_hash_undefined__":e,this},zt.prototype.clear=function(){this.size=0,this.__data__={hash:new St,map:new(Ot||ft),string:new St}},zt.prototype.delete=function(t){var e=Pt(this,t).delete(t);return this.size-=e?1:0,e},zt.prototype.get=function(t){return Pt(this,t).get(t)},zt.prototype.has=function(t){return Pt(this,t).has(t)},zt.prototype.set=function(t,e){var r=Pt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function It(t){var e=this.__data__=new ft(t);this.size=e.size}It.prototype.clear=function(){this.__data__=new ft,this.size=0},It.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},It.prototype.get=function(t){return this.__data__.get(t)},It.prototype.has=function(t){return this.__data__.has(t)},It.prototype.set=function(t,e){var r=this.__data__;if(r instanceof ft){var n=r.__data__;if(!Ot||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new zt(n)}return r.set(t,e),this.size=r.size,this};var Et=function(){try{var t=mt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ut=Et;function Ft(t,e,r){"__proto__"==e&&Ut?Ut(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Mt=Object.prototype.hasOwnProperty;function Nt(t,e,r){var n=t[e];Mt.call(t,e)&&at(n,r)&&(void 0!==r||e in t)||Ft(t,e,r)}function kt(t,e,r,n){var o=!r;r||(r={});for(var u=-1,a=e.length;++u<a;){var i=e[u],c=n?n(r[i],t[i],i,r,t):void 0;void 0===c&&(c=t[i]),o?Ft(r,i,c):Nt(r,i,c)}return r}var Bt=Object.prototype.hasOwnProperty;function Ct(t){if(!J(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=W(t),r=[];for(var n in t)("constructor"!=n||!e&&Bt.call(t,n))&&r.push(n);return r}function Lt(t){return tt(t)?R(t,!0):Ct(t)}var $t="object"==typeof exports&&exports&&!exports.nodeType&&exports,Dt=$t&&"object"==typeof module&&module&&!module.nodeType&&module,Rt=Dt&&Dt.exports===$t?u.Buffer:void 0,Vt=Rt?Rt.allocUnsafe:void 0;function Wt(){return[]}var qt=Object.prototype.propertyIsEnumerable,Gt=Object.getOwnPropertySymbols,Ht=Gt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,u=[];++r<n;){var a=t[r];e(a,r,t)&&(u[o++]=a)}return u}(Gt(t),(function(e){return qt.call(t,e)})))}:Wt;function Jt(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Kt=q(Object.getPrototypeOf,Object),Qt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Jt(e,Ht(t)),t=Kt(t);return e}:Wt;function Xt(t,e,r){var n=e(t);return O(t)?n:Jt(n,r(t))}function Yt(t){return Xt(t,et,Ht)}function Zt(t){return Xt(t,Lt,Qt)}var te=mt(u,"DataView"),ee=mt(u,"Promise"),re=mt(u,"Set"),ne=mt(u,"WeakMap"),oe="[object Map]",ue="[object Promise]",ae="[object Set]",ie="[object WeakMap]",ce="[object DataView]",fe=bt(te),se=bt(Ot),le=bt(ee),pe=bt(re),ve=bt(ne),be=y;(te&&be(new te(new ArrayBuffer(1)))!=ce||Ot&&be(new Ot)!=oe||ee&&be(ee.resolve())!=ue||re&&be(new re)!=ae||ne&&be(new ne)!=ie)&&(be=function(t){var e=y(t),r="[object Object]"==e?t.constructor:void 0,n=r?bt(r):"";if(n)switch(n){case fe:return ce;case se:return oe;case le:return ue;case pe:return ae;case ve:return ie}return e});var ye=be,he=Object.prototype.hasOwnProperty;var de=u.Uint8Array;function je(t){var e=new t.constructor(t.byteLength);return new de(e).set(new de(t)),e}var ge=/\w*$/;var _e=a?a.prototype:void 0,we=_e?_e.valueOf:void 0;var me="[object Boolean]",Oe="[object Date]",Te="[object Map]",Ae="[object Number]",xe="[object RegExp]",Se="[object Set]",Pe="[object String]",ze="[object Symbol]",Ie="[object ArrayBuffer]",Ee="[object DataView]",Ue="[object Float32Array]",Fe="[object Float64Array]",Me="[object Int8Array]",Ne="[object Int16Array]",ke="[object Int32Array]",Be="[object Uint8Array]",Ce="[object Uint8ClampedArray]",Le="[object Uint16Array]",$e="[object Uint32Array]";function De(t,e,r){var n,o,u,a=t.constructor;switch(e){case Ie:return je(t);case me:case Oe:return new a(+t);case Ee:return function(t,e){var r=e?je(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case Ue:case Fe:case Me:case Ne:case ke:case Be:case Ce:case Le:case $e:return function(t,e){var r=e?je(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case Te:return new a;case Ae:case Pe:return new a(t);case xe:return(u=new(o=t).constructor(o.source,ge.exec(o))).lastIndex=o.lastIndex,u;case Se:return new a;case ze:return n=t,we?Object(we.call(n)):{}}}var Re=Object.create,Ve=function(){function t(){}return function(e){if(!J(e))return{};if(Re)return Re(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var We=C&&C.isMap,qe=We?M(We):function(t){return h(t)&&"[object Map]"==ye(t)};var Ge=C&&C.isSet,He=Ge?M(Ge):function(t){return h(t)&&"[object Set]"==ye(t)},Je=1,Ke=2,Qe=4,Xe="[object Arguments]",Ye="[object Function]",Ze="[object GeneratorFunction]",tr="[object Object]",er={};function rr(e,r,n,o,u,a){var i,c=r&Je,f=r&Ke,s=r&Qe;if(n&&(i=u?n(e,o,u,a):n(e)),void 0!==i)return i;if(!J(e))return e;var l=O(e);if(l){if(i=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&he.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!c)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,i)}else{var p=ye(e),v=p==Ye||p==Ze;if(S(e))return function(t,e){if(e)return t.slice();var r=t.length,n=Vt?Vt(r):new t.constructor(r);return t.copy(n),n}(e,c);if(p==tr||p==Xe||v&&!u){if(i=f||v?{}:function(t){return"function"!=typeof t.constructor||W(t)?{}:Ve(Kt(t))}(e),!c)return f?function(t,e){return kt(t,Qt(t),e)}(e,function(t,e){return t&&kt(e,Lt(e),t)}(i,e)):function(t,e){return kt(t,Ht(t),e)}(e,function(t,e){return t&&kt(e,et(e),t)}(i,e))}else{if(!er[p])return u?e:{};i=De(e,p,c)}}a||(a=new It);var b=a.get(e);if(b)return b;a.set(e,i),He(e)?e.forEach((function(t){i.add(rr(t,r,n,t,e,a))})):qe(e)&&e.forEach((function(t,o){i.set(o,rr(t,r,n,o,e,a))}));var y=l?void 0:(s?f?Zt:Yt:f?Lt:et)(e);return t(y||e,(function(t,o){y&&(t=e[o=t]),Nt(i,o,rr(t,r,n,o,e,a))})),i}er[Xe]=er["[object Array]"]=er["[object ArrayBuffer]"]=er["[object DataView]"]=er["[object Boolean]"]=er["[object Date]"]=er["[object Float32Array]"]=er["[object Float64Array]"]=er["[object Int8Array]"]=er["[object Int16Array]"]=er["[object Int32Array]"]=er["[object Map]"]=er["[object Number]"]=er[tr]=er["[object RegExp]"]=er["[object Set]"]=er["[object String]"]=er["[object Symbol]"]=er["[object Uint8Array]"]=er["[object Uint8ClampedArray]"]=er["[object Uint16Array]"]=er["[object Uint32Array]"]=!0,er["[object Error]"]=er[Ye]=er["[object WeakMap]"]=!1;var nr=1,or=4;function ur(t){return rr(t,nr|or)}function ar(){let t,e,r=new Promise((function(){t=arguments[0],e=arguments[1]}));return r.resolve=t,r.reject=e,r}var ir=/\s/;var cr=/^\s+/;function fr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&ir.test(t.charAt(e)););return e}(t)+1).replace(cr,""):t}var sr="[object Symbol]";function lr(t){return"symbol"==typeof t||h(t)&&y(t)==sr}var pr=NaN,vr=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,yr=/^0o[0-7]+$/i,hr=parseInt;function dr(t){if("number"==typeof t)return t;if(lr(t))return pr;if(J(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=J(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=fr(t);var r=br.test(t);return r||yr.test(t)?hr(t.slice(2),r?2:8):vr.test(t)?pr:+t}var jr=1/0,gr=17976931348623157e292;function _r(t){return t?(t=dr(t))===jr||t===-jr?(t<0?-1:1)*gr:t==t?t:0:0===t?t:0}var wr=1/0,mr=a?a.prototype:void 0,Or=mr?mr.toString:void 0;function Tr(t){if("string"==typeof t)return t;if(O(t))return function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(t,Tr)+"";if(lr(t))return Or?Or.call(t):"";var e=t+"";return"0"==e&&1/t==-wr?"-0":e}function Ar(t){return null==t?"":Tr(t)}var xr=u.isFinite,Sr=Math.min;var Pr,zr=(Pr=Math["round"],function(t,e){if(t=dr(t),e=null==e?0:Sr(function(t){var e=_r(t),r=e%1;return e==e?r?e-r:e:0}(e),292),e&&xr(t)){var r=(Ar(t)+"e").split("e");return+((r=(Ar(Pr(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return Pr(t)});function Ir(t){return!(!function(t){return"[object String]"===Object.prototype.toString.call(t)}(t)||""===t)}function Er(t){let e=!1;if(Ir(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(function(t){return t!=t}(t))return!1;e=!0}return e}function Ur(t){if(!Er(t))return 0;t=function(t){return Er(t)?_r(t):0}(t);let e=zr(t);return"0"===String(e)?0:e}function Fr(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var u=Array(o);++n<o;)u[n]=t[n+e];return u}(t,e,r)}function Mr(t){return t!=t}function Nr(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,u=r+(n?1:-1);n?u--:++u<o;)if(e(t[u],u,t))return u;return-1}(t,Mr,r)}var kr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Br="\\ud800-\\udfff",Cr="["+Br+"]",Lr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",$r="\\ud83c[\\udffb-\\udfff]",Dr="[^"+Br+"]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",Vr="[\\ud800-\\udbff][\\udc00-\\udfff]",Wr="(?:"+Lr+"|"+$r+")"+"?",qr="[\\ufe0e\\ufe0f]?",Gr=qr+Wr+("(?:\\u200d(?:"+[Dr,Rr,Vr].join("|")+")"+qr+Wr+")*"),Hr="(?:"+[Dr+Lr+"?",Lr,Rr,Vr,Cr].join("|")+")",Jr=RegExp($r+"(?="+$r+")|"+Hr+Gr,"g");function Kr(t){return function(t){return kr.test(t)}(t)?function(t){return t.match(Jr)||[]}(t):function(t){return t.split("")}(t)}function Qr(t,e,r){if((t=Ar(t))&&(r||void 0===e))return fr(t);if(!t||!(e=Tr(e)))return t;var n=Kr(t),o=Kr(e),u=function(t,e){for(var r=-1,n=t.length;++r<n&&Nr(e,t[r],0)>-1;);return r}(n,o),a=function(t,e){for(var r=t.length;r--&&Nr(e,t[r],0)>-1;);return r}(n,o)+1;return Fr(n,u,a).join("")}var Xr="[object Boolean]";function Yr(t){return!0===(e=t)||!1===e||h(e)&&y(e)==Xr;var e}function Zr(t){if(Yr(t))return t;if(0===t)return!1;if(1===t)return!0;let e=!1;return Ir(t)&&"true"===(t=Ar(Qr(t)).toLowerCase())&&(e=!0),e}var tn={};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function u(t,e,n,u,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var i=new o(n,u||t,a),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],i]:t._events[c].push(i):(t._events[c]=i,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),i.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},i.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,u=n.length,a=new Array(u);o<u;o++)a[o]=n[o].fn;return a},i.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},i.prototype.emit=function(t,e,n,o,u,a){var i=r?r+t:t;if(!this._events[i])return!1;var c,f,s=this._events[i],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,n),!0;case 4:return s.fn.call(s.context,e,n,o),!0;case 5:return s.fn.call(s.context,e,n,o,u),!0;case 6:return s.fn.call(s.context,e,n,o,u,a),!0}for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];s.fn.apply(s.context,c)}else{var p,v=s.length;for(f=0;f<v;f++)switch(s[f].once&&this.removeListener(t,s[f].fn,void 0,!0),l){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,e);break;case 3:s[f].fn.call(s[f].context,e,n);break;case 4:s[f].fn.call(s[f].context,e,n,o);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];s[f].fn.apply(s[f].context,c)}}return!0},i.prototype.on=function(t,e,r){return u(this,t,e,r,!1)},i.prototype.once=function(t,e,r){return u(this,t,e,r,!0)},i.prototype.removeListener=function(t,e,n,o){var u=r?r+t:t;if(!this._events[u])return this;if(!e)return a(this,u),this;var i=this._events[u];if(i.fn)i.fn!==e||o&&!i.once||n&&i.context!==n||a(this,u);else{for(var c=0,f=[],s=i.length;c<s;c++)(i[c].fn!==e||o&&!i[c].once||n&&i[c].context!==n)&&f.push(i[c]);f.length?this._events[u]=1===f.length?f[0]:f:a(this,u)}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=r,i.EventEmitter=i,t.exports=i}({get exports(){return tn},set exports(t){tn=t}});var en=tn;function rn(){return new en}return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},r=!1;t.usePollingTableTags?t.usePollingTableTags=Zr(t.usePollingTableTags):t.usePollingTableTags=!1,t.pollingIntervalTime?t.pollingIntervalTime=Ur(t.pollingIntervalTime):t.pollingIntervalTime=2e3;let n=new rn;function o(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];setTimeout((()=>{n.emit(t,...r)}),1)}async function u(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[];o("beforeUpdateTableTags",{oldTableTags:ur(e),newTableTags:ur(t)});let n=!1;ut(t,((t,r)=>{e[r]!==t&&(n=!0)})),o("refreshState",{needToRefresh:n,oldTableTags:ur(e),newTableTags:ur(t)}),ut(t,((t,n)=>{if(e[n]!==t){let u=ar(),a={tableName:n,timeTag:t,pm:u};r.push(u),o("refreshTable",a),u.then((r=>{e[n]=t,o("getData",{tableName:n,timeTag:t,data:r})})).catch((t=>{o("error",{msg:"can not get table data: "+n,err:t})}))}})),await Promise.all(r),o("afterUpdateTableTags",{oldTableTags:ur(e),newTableTags:ur(t)})}async function a(){if(r)return;r=!0,o("beforePollingTableTags");let e=ar();o("refreshTags",{pm:e});let n=await e.catch((t=>{o("error",{msg:"can not get tags data",err:t})}));n&&await u(n),await function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Er(t)||(t=10);let e=ar();return setTimeout((function(){e.resolve()}),t),e}(t.pollingIntervalTime),o("afterPollingTableTags"),r=!1}return t.usePollingTableTags&&"undefined"!=typeof window&&window.addEventListener("mouseover",(t=>{a()}),!1),n.setTableTags=function(){e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},n.updateTableTags=u,n.pollingTableTags=a,n}}));
//# sourceMappingURL=w-sync-webdata-client.umd.js.map
